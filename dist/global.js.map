{"version":3,"sources":["scripts/helpers.js","scripts/add-list.js","scripts/add-recipe-button.js","global.js"],"names":["BASE_URL","OPTIONS","method","credentials","headers","replaceWithForm","element","callback","btnText","formLabel","replaceParent","changeInnerTextOfEl","form","document","createElement","classList","add","parent","parentElement","changingEl","querySelector","handleSubmit","e","formReset","newVal","value","innerText","replaceWith","removeEventListener","addEventListener","innerHTML","trim","elements","focus","clickOutside","useApi","endpoint","data","body","JSON","stringify","fetch","then","res","json","getInputValue","selector","getInputValueByForm","values","querySelectorAll","reduce","valueObj","input","index","name","toggleOnOff","actionElement","parentElementSelector","action","toggleState","parentEl","target","closest","dataset","state","toggleOff","contains","getUserId","WP","userId","runCallBack","updateAllListsWithNewList","newListItem","parentList","updateAllListsWith","list","clone","cloneNode","prepend","updateAllListsWithNewCount","itemId","newCount","forEach","handleError","err","item","message","alert","addCreateListHandler","console","log","showFormBtn","handleShowCreateListForm","handleAddList","waitTillResolve","preventDefault","listName","index0","listParent","listItemCopy","createNewListItem","addList","error","list_id","link","listItem","updateNewListItemWith","window","__FAVE_RECIPE","newListItemLink","listId","allLinks","anchorEl","setAttribute","href","user_id","parseInt","title","addRecipeToListButtonInit","component","perMainComponentDo","toggleButton","handleRecipeListItemActionFromButton","clickedItem","button","handleAddRecipeToList","countEl","recipeId","addRecipeToList","item_id","changeListPrivacyMode","status","renameList","forkList","list_title"],"mappings":"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","file":"global.js","sourceRoot":"../assets","sourcesContent":["const BASE_URL = \"/wp-json/recipe-list/v1\";\nconst OPTIONS = {\n  method: \"POST\",\n  credentials: \"same-origin\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nexport function replaceWithForm({\n  element,\n  callback,\n  formLabel = null,\n  btnText = \"submit\",\n  replaceParent = false,\n  changeInnerTextOfEl = null,\n}) {\n  const form = document.createElement(\"form\");\n  form.classList.add(\"generated-inline\");\n  const parent = element.parentElement;\n  const changingEl =\n    changeInnerTextOfEl && parent.querySelector(changeInnerTextOfEl);\n\n  form.addEventListener(\"submit\", handleSubmit);\n\n  form.innerHTML = `\n    <input type=\"text\" class=\"small-inline-input\" value=\"${(changeInnerTextOfEl\n      ? changingEl.innerHTML\n      : \"&nbsp;\"\n    ).trim()}\"/> \n    <button type=\"submit\">${btnText}</button>\n    `;\n  if (replaceParent === false || !replaceParent) {\n    element.replaceWith(form);\n  } else {\n    parent.replaceWith(form);\n  }\n  form.elements[0].focus();\n  clickOutside(form.parentElement, formReset);\n\n  function handleSubmit(e) {\n    callback(e, parent);\n    formReset();\n    if (changeInnerTextOfEl) {\n      const newVal = form.querySelector(\".small-inline-input\").value;\n      changingEl.innerText = newVal;\n    }\n  }\n\n  function formReset() {\n    if (!replaceParent) {\n      form.replaceWith(element);\n    } else {\n      form.replaceWith(parent);\n    }\n    form.removeEventListener(\"submit\", handleSubmit);\n  }\n}\n\nexport function useApi(endpoint, data) {\n  const body = JSON.stringify(data);\n  return fetch(`${BASE_URL}/${endpoint}`, {\n    ...OPTIONS,\n    body,\n  }).then((res) => res.json());\n}\nexport function getInputValue(selector) {\n  const el = document.querySelector(selector);\n  const value = el.value;\n  return value;\n}\nexport function getInputValueByForm(form) {\n  const inputs = [...form.querySelectorAll(\"input\")];\n  const values = inputs.reduce((valueObj, input, index) => {\n    const { value, name } = input;\n    if (name) {\n      valueObj[name] = value;\n    } else {\n      valueObj[`index${index}`] = value;\n    }\n    return valueObj;\n  }, {});\n\n  return values;\n}\n\nexport function toggleOnOff(\n  actionElement,\n  parentElementSelector,\n  action = \"click\"\n) {\n  actionElement.addEventListener(action, toggleState);\n  if (action === \"click\") {\n    document.body.addEventListener(action, toggleOff);\n  }\n  function toggleState(e) {\n    const parentEl = e.target.closest(parentElementSelector);\n    const on = parentEl.dataset.state;\n    if (on) {\n      delete parentEl.dataset.state;\n    } else {\n      parentEl.dataset.state = \"on\";\n    }\n  }\n  function toggleOff(e) {\n    if (\n      document.contains(e.target) &&\n      !actionElement.closest(parentElementSelector).contains(e.target)\n    ) {\n      delete actionElement.closest(parentElementSelector).dataset.state;\n    }\n  }\n}\n\nexport function getUserId() {\n  return WP.userId;\n}\n\nfunction clickOutside(element, callback) {\n  document.body.addEventListener(\"click\", runCallBack);\n  function runCallBack(e) {\n    if (!element) return;\n\n    if (\n      document.contains(e.target) &&\n      !element.contains(e.target) &&\n      element !== e.target\n    ) {\n      callback();\n    }\n  }\n}\n\nexport function updateAllListsWithNewList(newListItem, parentList) {\n  updateAllListsWith((list) => {\n    const clone = newListItem.cloneNode(true);\n    if (parentList === list) return;\n    list.prepend(clone);\n  });\n}\nexport function updateAllListsWithNewCount({ itemId, newCount, parentList }) {\n  updateAllListsWith((list) => {\n    if (parentList === list) return;\n    const countToUpdate = list.querySelector(\n      `[data-list-id=\"${itemId}\"] .count`\n    );\n    countToUpdate.innerText = newCount;\n  });\n}\nfunction updateAllListsWith(callback) {\n  [...document.querySelectorAll(\".add-recipe-to-list\")].forEach((parentEl) => {\n    const list = parentEl.querySelector(\"ul\");\n    callback(list);\n  });\n}\nexport function handleError(err, item) {\n  if (err.message) {\n    alert(err.message);\n  }\n  item.dataset.state = \"error\";\n}\n","import {\n  replaceWithForm,\n  getInputValueByForm,\n  handleError,\n  updateAllListsWithNewList,\n  getUserId,\n  useApi,\n} from \"./helpers\";\n\nexport function addCreateListHandler(parent) {\n  console.log(\"addCreateListHandler Ran\", parent);\n  const showFormBtn = parent.querySelector(`[data-action='show-create-list']`);\n  showFormBtn.addEventListener(\"click\", () =>\n    handleShowCreateListForm(showFormBtn)\n  );\n}\nexport function handleShowCreateListForm(element) {\n  const callback = handleAddList;\n  const btnText = \"create\";\n  replaceWithForm({\n    element,\n    callback,\n    btnText,\n    replaceParent: false,\n    waitTillResolve: true,\n  });\n}\n\n//ADD LIST\nexport function handleAddList(e) {\n  e.preventDefault();\n  const { index0: listName } = getInputValueByForm(e.target);\n  const userId = getUserId();\n  const listParent = e.target\n    .closest(\".lists, .add-recipe-to-list\")\n    .querySelector(\"ul\");\n  const listItemCopy = createNewListItem(listParent, listName);\n  listItemCopy.dataset.state = \"loading\";\n  addList(listName, userId).then((res) => {\n    if (res.error) {\n      handleError(res.error, listItemCopy);\n    } else {\n      const { list_id, link } = res.data;\n      const listItem = updateNewListItemWith({\n        listItemCopy,\n        list_id,\n        link: window.__FAVE_RECIPE.newListItemLink\n          ? window.__FAVE_RECIPE.newListItemLink\n          : link, //add ability for other scripts to give default link for new collections\n      });\n      listItem.dataset.state = \"idle\";\n      // this is for the recipe button\n      if (listParent.classList.contains(\"lists\")) {\n        updateAllListsWithNewList(listItem, listParent);\n      }\n    }\n  });\n}\n\nfunction createNewListItem(listParent, listName) {\n  const listItemCopy = listParent\n    .querySelector(\"li:last-child\")\n    .cloneNode(true);\n  listItemCopy.querySelector(\".recipe-title .title-el\").innerText = listName;\n  listParent.prepend(listItemCopy);\n  return listItemCopy;\n}\nfunction updateNewListItemWith({ listItemCopy, list_id, link }) {\n  listItemCopy.dataset.listId = list_id;\n  const allLinks = [...listItemCopy.querySelectorAll(\"a\")];\n  console.log(allLinks);\n  allLinks.forEach((anchorEl) => {\n    anchorEl.setAttribute(\"href\", link);\n    console.log(link.href);\n  });\n\n  return listItemCopy;\n}\n\nfunction addList(listName, userId) {\n  const data = { user_id: parseInt(userId), title: listName };\n  return useApi(\"create-list\", data);\n}\n","import {\n  useApi,\n  toggleOnOff,\n  updateAllListsWithNewCount,\n  handleError,\n} from \"./helpers\";\nimport { handleShowCreateListForm } from \"./add-list\";\nwindow.addEventListener(\"DOMContentLoaded\", addRecipeToListButtonInit);\nfunction addRecipeToListButtonInit() {\n  const mainComponents = [...document.querySelectorAll(\".add-recipe-to-list\")];\n  mainComponents.forEach((component) => perMainComponentDo(component));\n}\n\nfunction perMainComponentDo(component) {\n  const toggleButton = component.querySelector('[data-action=\"toggle-list\"]');\n  toggleOnOff(toggleButton, \".add-recipe-to-list\");\n\n  const list = component.querySelector(\".button-lists\");\n  list.addEventListener(\"click\", handleRecipeListItemActionFromButton);\n\n  function handleRecipeListItemActionFromButton(e) {\n    const clickedItem = e.target;\n    const button = clickedItem.closest(\"[data-action]\");\n    const action = button && button.dataset.action;\n    if (!action) return;\n\n    switch (action) {\n      case \"add-recipe\":\n        handleAddRecipeToList(button.parentElement, component);\n        break;\n      case \"show-create-list\":\n        handleShowCreateListForm(button);\n      default:\n        console.log(\"no action was given\");\n        break;\n    }\n  }\n}\nfunction handleAddRecipeToList(listItem, component) {\n  listItem.dataset.state = \"loading\";\n  const countEl = listItem.querySelector(\".count\");\n  const newCount = parseInt(countEl.innerText) + 1;\n  countEl.innerText = newCount;\n  const data = {\n    recipeId: component.dataset.recipeId,\n    listId: listItem.dataset.listId,\n  };\n  addRecipeToList(data).then((res) => {\n    if (res.error) {\n      handleError(res.error, listItem);\n    } else {\n      listItem.dataset.state = \"idle\";\n      updateAllListsWithNewCount({\n        itemId: data.listId,\n        newCount,\n        parentElement: listItem.parentElement,\n      });\n    }\n  });\n}\n\nfunction addRecipeToList({ recipeId, listId }) {\n  return useApi(\"add-item\", { item_id: parseInt(recipeId), list_id: listId });\n}\n\nfunction changeListPrivacyMode({ list_id, status, user_id }) {\n  return useApi(\"change-list-status\", { list_id, status, user_id });\n}\n\nfunction renameList({ title, list_id }) {\n  return useApi(\"rename-list\", { title, list_id });\n}\n\nfunction forkList({ list_id, user_id, list_title }) {\n  return useApi(\"fork-list\", { list_id, user_id, list_title });\n}\n//adding to global window for theme authors to use\nwindow.__FAVE_RECIPE = {\n  ...window.__FAVE_RECIPE,\n  addRecipeToList,\n  changeListPrivacyMode,\n  forkList,\n  renameList,\n};\n","import \"./scripts/add-recipe-button.js\";\nimport \"./styles/tooltip.scss\";\nimport \"./styles/global.scss\";\n"]}