{"version":3,"sources":["scripts/helpers.js","scripts/main.js","main.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["BASE_URL","OPTIONS","method","credentials","headers","replaceWithForm","element","callback","formLabel","btnText","replaceParent","form","document","createElement","classList","add","parent","parentElement","addEventListener","e","replaceWith","innerHTML","console","log","useApi","endpoint","data","body","JSON","stringify","fetch","then","res","json","getInputValue","selector","el","querySelector","value","getInputValueByForm","inputs","querySelectorAll","values","reduce","valueObj","input","index","name","window","initManagement","list","addListItemActionHandlers","listBottom","addCreateListHandler","showFormBtn","handleShowCreateListForm","currentTarget","handleAddList","preventDefault","target","listName","index0","userId","getUserId","response","addList","user_id","parseInt","title","executeListItemAction","item","action","dataset","handleDeleteList","listId","closest","deleteList","list_id","handleRenameListBtnClick","handleAddRecipe","button","recipeId","addRecipeToList","item_id","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","i","length","module"],"mappings":"AGAA,ACAA,IDAIoF,ACAAY,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;AFAA,ACCA,ACCA,AHFA,SECSZ,ACCAa,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDChB,MCCM,GDDX,ACCce,EDDE,ECCE,CAACE,SAAL,EAAd;AFFF,ACEIjB,AFIJpC,IEJIoC,EFIE,CAAClE,MEJM,GAAGoE,OFIhB,CAAwB,IEJI,EAAxB,YFIJ,EAA4CrC,cAA5C;AEHG,ACADmD,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AHIJ,IGJIA,IAAI,CAACI,AHIAtD,MGJL,QHIJ,GAA0B;AEHxB,ACAC,AHID,GGNA,GHMI,CAACrC,EEJEwE,MFIM,CAAC/C,EEJd,WFIK,CAAuB,8BAAvB,CAAL,EAA6D;AEH9D,AFKC,MAAMa,IAAI,GAAGtC,QAAQ,CAACyB,aAAT,CAAuB,WAAvB,CAAb;AGLA+D,AHMAjD,EGNAiD,AHMAjD,OGNO,CAACqD,IAAR,GAAeL,IAAI,CAACK,IAAL,CAAUC,AHMA,CAACvD,IGNX,AHMU,CGNM,AHM/B,GGNe,EAAqB,CAArB,IAA0B,GAA1B,GAAgCwD,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDER,AHOA,EGPAA,IAAI,AHOE/C,CGPDwD,EDCEtB,OFMS,CGPhB,CAAgBuB,CHOGjG,EENrB,GAAwB,GFMK,CAACyB,EGP5B,CAA6B+D,OAA7B,EAAsCD,CHOnB,CAAuB,EGPA,CAACW,WAA3C,AHOmB,CAAnB;AELA,ACDD,AHOCzD,EAAAA,oBAAoB,CAACD,UAAD,CAApB;AELA,AFMD,EAED,IERM;AACF,ACDJ,IAAI2D,MDCM,IAAIxB,ACDA,GAAG,EDCP,EAAN,ACDJ;ADEG,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,ACFJ,AHQA,QENQC,CCFCuB,AHQA3D,MENM,GAAG,ACFlB,CDEmB,ECFE,GDEGmC,GAAG,CAACE,CFM5B,CAA8B1E,GENZ,EAAiB2E,CFMnC,EAAsC,EENpB,CAAuB,+DAAvB,CAAd;ACDF,AHQArE,EAAAA,IGRIyF,GHQG,CAACxF,GAAR,CAAY,EGRZ,EAAgB,IHQhB;AENE,ACDA,AHQF,MAAM+B,EEPAmC,OAAJ,EAAa,AFOE,GAAGzE,MAAM,CAACqB,aAAP,sCAApB;AENI,ACDH,AHQDiB,EAAAA,WEPWsC,AFOA,CAAC1E,SEPS,CAACuE,MFOtB,CEP6B,AFOA,CEPC,CAAD,CAAR,CAAjB,GFOJ,EAAsClC,wBAAtC;AENG,AFOJ;AENE,ACDDwD,EAAAA,UAAU,GAAGE,UAAU,CAAC,YAAY;AAClC,AHOJ,QGPQC,CHOC3D,IGPI,GAAG3C,QAAQ,CAAC6B,QHOzB,CAAkCtB,CAAlC,EAAqC,IGPrB,CAA0B,wBAA1B,CAAZ;ADEF,AFMA,MAAMb,GENC,GAAP,CFMa,GAAGa,CAAC,CAACqC,aAAlB;AELD,ACFG,AHQF,MAAMjD,GGRC,IAAI4G,CAAC,AHQE,GGRC,AHQE1D,CGRf,EAAgB0D,CAAC,GAAGD,KAAK,CAACE,AHQ5B,MGRE,EAAkCD,CAAC,EAAnC,EAAuC;AACrC,AHQJ,MAAM3G,IGREwF,KHQO,CGRD,CAACJ,CHQG,SGRV,CAAkBsB,CHQ1B,IGR+B,CAACC,CAAD,CAAL,CAASX,IAA3B,MAAqCR,MAAM,CAACV,YAAP,EAAzC,EAAgE;ADGtE,ACFQY,AHQN,MAAMzF,EGRAyF,CDECN,IFMM,GAAG,EGRA,CDElB,ACFmBsB,CDECrB,GAApB,CCFwB,AHQtB,CENuB,ACFAsB,CAAD,CAAN,CAAV;ADGN,ACFK,AHQL,SENO,CAAC,KAAKtB,GAAN,EAAWC,OAAX,CAAmB,IFMV,kEENT,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,AHQDxF,IAAAA,OAAO,EAAPA,OADc;AD9BlB,ACgCIC,IDhCEP,ACgCFO,QDhCU,ACgCF,EAARA,CDhCa,OC8BC,kBD9BlB;AG2BAwF,ACFIgB,AJxBJ,ACgCIvG,IGRAuG,AJxBE9G,ACgCFO,GENG,CAAC8E,GH1BK,ECgCA,CGRC,AJxBE,CCgCZ9E,EGRa,GDEjB,CCFI,EDEmB6E,CFGL,iBEHlB;AACAU,ACFG,AJxBD7F,ACgCEO,EDhCFP,CIeuB,CHiBrBO,CGRC,EDEE,ACXkB,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","file":"main.js","sourceRoot":"..","sourcesContent":["const BASE_URL = \"/wp-json/recipe-list/v1\";\nconst OPTIONS = {\n  method: \"POST\",\n  credentials: \"same-origin\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nexport function replaceWithForm({\n  element,\n  callback,\n  formLabel = null,\n  btnText = \"submit\",\n  replaceParent = false,\n}) {\n  const form = document.createElement(\"form\");\n  form.classList.add(\"generated-inline\");\n  const parent = element.parentElement;\n  form.addEventListener(\"submit\", (e) => {\n    callback(e);\n    if (!replaceParent) {\n      form.replaceWith(element);\n    } else {\n      form.replaceWith(parent);\n    }\n  });\n  form.innerHTML = `\n    <input type=\"text\" placeholder=\"${formLabel}\" class=\"small-inline-input\" /> \n    <button type=\"submit\">${btnText}</button>\n    `;\n  if (replaceParent === false || !replaceParent) {\n    console.log(element);\n    element.replaceWith(form);\n  } else {\n    parent.replaceWith(form);\n  }\n}\n\nexport function useApi(endpoint, data) {\n  const body = JSON.stringify(data);\n  return fetch(`${BASE_URL}/${endpoint}`, {\n    ...OPTIONS,\n    body,\n  }).then((res) => res.json());\n}\nexport function getInputValue(selector) {\n  const el = document.querySelector(selector);\n  const value = el.value;\n  return value;\n}\nexport function getInputValueByForm(form) {\n  const inputs = [...form.querySelectorAll(\"input\")];\n  const values = inputs.reduce((valueObj, input, index) => {\n    const { value, name } = input;\n    if (name) {\n      valueObj[name] = value;\n    } else {\n      valueObj[`index${index}`] = value;\n    }\n    return valueObj;\n  }, {});\n\n  return values;\n}\n","import {\n  replaceWithForm,\n  useApi,\n  getInputValue,\n  getInputValueByForm,\n} from \"./helpers\";\n\nwindow.addEventListener(\"DOMContentLoaded\", initManagement);\n\nfunction initManagement() {\n  if (!document.querySelector(\".recipe-list-management-area\")) return;\n\n  const list = document.querySelector(\".my-lists\");\n  addListItemActionHandlers(list);\n\n  const listBottom = document.querySelector(\".list-bottom\");\n  addCreateListHandler(listBottom);\n}\n\n//HANDLERS AND API CALLS\nfunction addCreateListHandler(parent) {\n  console.log(\"object\");\n  const showFormBtn = parent.querySelector(`[data-action=\"show-create-list\"]`);\n  showFormBtn.addEventListener(\"click\", handleShowCreateListForm);\n}\nfunction handleShowCreateListForm(e) {\n  const element = e.currentTarget;\n  const callback = handleAddList;\n  const formLabel = \"List Name\";\n  const btnText = \"create\";\n  replaceWithForm({\n    element,\n    callback,\n    formLabel,\n    btnText,\n    replaceParent: false,\n  });\n}\n\n//ADD LIST\nfunction handleAddList(e) {\n  e.preventDefault();\n  const { index0: listName } = getInputValueByForm(e.target);\n  const userId = getUserId();\n  const response = addList(listName, userId).then((res) => console.log(res));\n}\nfunction addList(listName, userId) {\n  const data = { user_id: parseInt(userId), title: listName };\n  return useApi(\"create-list\", data);\n}\n\nfunction addListItemActionHandlers(list) {\n  list.addEventListener(\"click\", executeListItemAction);\n  function executeListItemAction(e) {\n    const item = e.target;\n    const { action } = item.dataset;\n    if (!action) return;\n\n    switch (action) {\n      case \"delete-list\":\n        handleDeleteList(item);\n        break;\n    }\n  }\n}\n\n//DELETE LIST\nfunction handleDeleteList(element) {\n  const listId = element.closest(\".list-item\").dataset.listId;\n  const userId = getUserId();\n  const response = deleteList(listId, userId).then((res) => console.log(res));\n}\nfunction deleteList(listId, userId) {\n  const data = { list_id: parseInt(listId), user_id: parseInt(userId) };\n  return useApi(\"delete-list\", data);\n}\n\n//RENAME LIST\nfunction handleRenameListBtnClick(e) {\n  replaceWithForm({\n    element: e.target,\n    callback: () => console.log(\"yay\"),\n    btnText: \"rename\",\n    replaceParent: true,\n  });\n}\n\nfunction handleAddRecipe(e) {\n  const button = e.target;\n  const recipeId = button.dataset.recipeId;\n  //TODO get list id\n  const response = addRecipeToList(recipeId).then((res) => console.log(res));\n}\n// Jul 14, 2020 - Joseph changed this to accommodate his staging area.\nfunction addRecipeToList(recipeId, listId = 8045) {\n  return useApi(\"add-item\", { item_id: parseInt(recipeId), list_id: listId });\n}\n\nfunction getUserId() {\n  return document.querySelector(\"[data-user-id]\").dataset.userId;\n}\n","import './scripts/main.js'\nimport './styles/main.scss'\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}