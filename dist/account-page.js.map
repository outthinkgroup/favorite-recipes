{"version":3,"sources":["scripts/helpers.js","scripts/add-list.js","scripts/account-page.js","account-page.js"],"names":["BASE_URL","OPTIONS","method","credentials","headers","replaceWithForm","element","callback","btnText","formLabel","replaceParent","changeInnerTextOfEl","form","document","createElement","classList","add","parent","parentElement","changingEl","querySelector","handleSubmit","e","formReset","newVal","value","innerText","replaceWith","removeEventListener","addEventListener","innerHTML","trim","elements","focus","clickOutside","useApi","endpoint","data","body","JSON","stringify","fetch","then","res","json","getInputValue","selector","getInputValueByForm","values","querySelectorAll","reduce","valueObj","input","index","name","toggleOnOff","actionElement","parentElementSelector","action","toggleState","parentEl","target","closest","dataset","state","toggleOff","contains","getUserId","WP","userId","runCallBack","updateAllListsWithNewList","newListItem","parentList","updateAllListsWith","list","clone","cloneNode","prepend","updateAllListsWithNewCount","itemId","newCount","forEach","handleError","err","item","message","alert","addCreateListHandler","console","log","showFormBtn","handleShowCreateListForm","handleAddList","waitTillResolve","preventDefault","listName","index0","listParent","listItemCopy","createNewListItem","addList","error","list_id","link","listItem","updateNewListItemWith","window","__FAVE_RECIPE","newListItemLink","listId","allLinks","anchorEl","setAttribute","href","user_id","parseInt","title","initManagement","addListItemActionHandlers","listBottom","lists","executeListItemAction","handleDeleteList","handleRenameListBtnClick","deleteList","removeChild","handleRenameRecipe","deleteRecipeFromList","recipeId","item_id"],"mappings":"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","file":"account-page.js","sourceRoot":"../assets","sourcesContent":["const BASE_URL = \"/wp-json/recipe-list/v1\";\nconst OPTIONS = {\n  method: \"POST\",\n  credentials: \"same-origin\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nexport function replaceWithForm({\n  element,\n  callback,\n  formLabel = null,\n  btnText = \"submit\",\n  replaceParent = false,\n  changeInnerTextOfEl = null,\n}) {\n  const form = document.createElement(\"form\");\n  form.classList.add(\"generated-inline\");\n  const parent = element.parentElement;\n  const changingEl =\n    changeInnerTextOfEl && parent.querySelector(changeInnerTextOfEl);\n\n  form.addEventListener(\"submit\", handleSubmit);\n\n  form.innerHTML = `\n    <input type=\"text\" class=\"small-inline-input\" value=\"${(changeInnerTextOfEl\n      ? changingEl.innerHTML\n      : \"&nbsp;\"\n    ).trim()}\"/> \n    <button type=\"submit\">${btnText}</button>\n    `;\n  if (replaceParent === false || !replaceParent) {\n    element.replaceWith(form);\n  } else {\n    parent.replaceWith(form);\n  }\n  form.elements[0].focus();\n  clickOutside(form.parentElement, formReset);\n\n  function handleSubmit(e) {\n    callback(e, parent);\n    formReset();\n    if (changeInnerTextOfEl) {\n      const newVal = form.querySelector(\".small-inline-input\").value;\n      changingEl.innerText = newVal;\n    }\n  }\n\n  function formReset() {\n    if (!replaceParent) {\n      form.replaceWith(element);\n    } else {\n      form.replaceWith(parent);\n    }\n    form.removeEventListener(\"submit\", handleSubmit);\n  }\n}\n\nexport function useApi(endpoint, data) {\n  const body = JSON.stringify(data);\n  return fetch(`${BASE_URL}/${endpoint}`, {\n    ...OPTIONS,\n    body,\n  }).then((res) => res.json());\n}\nexport function getInputValue(selector) {\n  const el = document.querySelector(selector);\n  const value = el.value;\n  return value;\n}\nexport function getInputValueByForm(form) {\n  const inputs = [...form.querySelectorAll(\"input\")];\n  const values = inputs.reduce((valueObj, input, index) => {\n    const { value, name } = input;\n    if (name) {\n      valueObj[name] = value;\n    } else {\n      valueObj[`index${index}`] = value;\n    }\n    return valueObj;\n  }, {});\n\n  return values;\n}\n\nexport function toggleOnOff(\n  actionElement,\n  parentElementSelector,\n  action = \"click\"\n) {\n  actionElement.addEventListener(action, toggleState);\n  if (action === \"click\") {\n    document.body.addEventListener(action, toggleOff);\n  }\n  function toggleState(e) {\n    const parentEl = e.target.closest(parentElementSelector);\n    const on = parentEl.dataset.state;\n    if (on) {\n      delete parentEl.dataset.state;\n    } else {\n      parentEl.dataset.state = \"on\";\n    }\n  }\n  function toggleOff(e) {\n    if (\n      document.contains(e.target) &&\n      !actionElement.closest(parentElementSelector).contains(e.target)\n    ) {\n      delete actionElement.closest(parentElementSelector).dataset.state;\n    }\n  }\n}\n\nexport function getUserId() {\n  return WP.userId;\n}\n\nfunction clickOutside(element, callback) {\n  document.body.addEventListener(\"click\", runCallBack);\n  function runCallBack(e) {\n    if (!element) return;\n\n    if (\n      document.contains(e.target) &&\n      !element.contains(e.target) &&\n      element !== e.target\n    ) {\n      callback();\n    }\n  }\n}\n\nexport function updateAllListsWithNewList(newListItem, parentList) {\n  updateAllListsWith((list) => {\n    const clone = newListItem.cloneNode(true);\n    if (parentList === list) return;\n    list.prepend(clone);\n  });\n}\nexport function updateAllListsWithNewCount({ itemId, newCount, parentList }) {\n  updateAllListsWith((list) => {\n    if (parentList === list) return;\n    const countToUpdate = list.querySelector(\n      `[data-list-id=\"${itemId}\"] .count`\n    );\n    countToUpdate.innerText = newCount;\n  });\n}\nfunction updateAllListsWith(callback) {\n  [...document.querySelectorAll(\".add-recipe-to-list\")].forEach((parentEl) => {\n    const list = parentEl.querySelector(\"ul\");\n    callback(list);\n  });\n}\nexport function handleError(err, item) {\n  if (err.message) {\n    alert(err.message);\n  }\n  item.dataset.state = \"error\";\n}\n","import {\n  replaceWithForm,\n  getInputValueByForm,\n  handleError,\n  updateAllListsWithNewList,\n  getUserId,\n  useApi,\n} from \"./helpers\";\n\nexport function addCreateListHandler(parent) {\n  console.log(\"addCreateListHandler Ran\", parent);\n  const showFormBtn = parent.querySelector(`[data-action='show-create-list']`);\n  showFormBtn.addEventListener(\"click\", () =>\n    handleShowCreateListForm(showFormBtn)\n  );\n}\nexport function handleShowCreateListForm(element) {\n  const callback = handleAddList;\n  const btnText = \"create\";\n  replaceWithForm({\n    element,\n    callback,\n    btnText,\n    replaceParent: false,\n    waitTillResolve: true,\n  });\n}\n\n//ADD LIST\nexport function handleAddList(e) {\n  e.preventDefault();\n  const { index0: listName } = getInputValueByForm(e.target);\n  const userId = getUserId();\n  const listParent = e.target\n    .closest(\".lists, .add-recipe-to-list\")\n    .querySelector(\"ul\");\n  const listItemCopy = createNewListItem(listParent, listName);\n  listItemCopy.dataset.state = \"loading\";\n  addList(listName, userId).then((res) => {\n    if (res.error) {\n      handleError(res.error, listItemCopy);\n    } else {\n      const { list_id, link } = res.data;\n      const listItem = updateNewListItemWith({\n        listItemCopy,\n        list_id,\n        link: window.__FAVE_RECIPE.newListItemLink\n          ? window.__FAVE_RECIPE.newListItemLink\n          : link, //add ability for other scripts to give default link for new collections\n      });\n      listItem.dataset.state = \"idle\";\n      // this is for the recipe button\n      if (listParent.classList.contains(\"lists\")) {\n        updateAllListsWithNewList(listItem, listParent);\n      }\n    }\n  });\n}\n\nfunction createNewListItem(listParent, listName) {\n  const listItemCopy = listParent\n    .querySelector(\"li:last-child\")\n    .cloneNode(true);\n  listItemCopy.querySelector(\".recipe-title .title-el\").innerText = listName;\n  listParent.prepend(listItemCopy);\n  return listItemCopy;\n}\nfunction updateNewListItemWith({ listItemCopy, list_id, link }) {\n  listItemCopy.dataset.listId = list_id;\n  const allLinks = [...listItemCopy.querySelectorAll(\"a\")];\n  console.log(allLinks);\n  allLinks.forEach((anchorEl) => {\n    anchorEl.setAttribute(\"href\", link);\n    console.log(link.href);\n  });\n\n  return listItemCopy;\n}\n\nfunction addList(listName, userId) {\n  const data = { user_id: parseInt(userId), title: listName };\n  return useApi(\"create-list\", data);\n}\n","import {\n  replaceWithForm,\n  useApi,\n  getInputValueByForm,\n  getUserId,\n} from \"./helpers\";\nimport { addCreateListHandler } from \"./add-list\";\n\nwindow.addEventListener(\"DOMContentLoaded\", initManagement);\n\nfunction initManagement() {\n  if (!document.querySelector(\".recipe-list-management-area\")) return;\n\n  const list = document.querySelector(\".my-lists\");\n  addListItemActionHandlers(list);\n\n  document\n    .querySelectorAll(\".lists-action\")\n    .forEach((listBottom) => addCreateListHandler(listBottom));\n}\n\n//HANDLERS AND API CALLS\n\nfunction addListItemActionHandlers(lists) {\n  lists.addEventListener(\"click\", (e) => {\n    console.log(\"ran\");\n    executeListItemAction(e);\n  });\n  function executeListItemAction(e) {\n    const item = e.target;\n    const { action } = item.dataset;\n    if (!action) return;\n    console.log(action, item);\n    switch (action) {\n      case \"delete-list\":\n        handleDeleteList(item);\n        return;\n      case \"rename-list\":\n        handleRenameListBtnClick(item);\n        return;\n    }\n  }\n}\n\n//DELETE LIST\nfunction handleDeleteList(element) {\n  const list = element.closest(\".list-item\");\n  const listId = list.dataset.listId;\n  const userId = getUserId();\n  const parentElement = list.parentElement;\n  list.dataset.state = \"hidden\";\n  deleteList(listId, userId).then((res) => {\n    if (res.error) {\n      handleError(res.error, list);\n    } else {\n      if (parentElement.contains(list)) {\n        parentElement.removeChild(list);\n      }\n    }\n  });\n}\nfunction deleteList(listId, userId) {\n  const data = { list_id: parseInt(listId), user_id: parseInt(userId) };\n  return useApi(\"delete-list\", data);\n}\n\n//RENAME LIST\nfunction handleRenameListBtnClick(element) {\n  replaceWithForm({\n    element,\n    callback: handleRenameRecipe,\n    btnText: \"rename\",\n    replaceParent: true,\n    changeInnerTextOfEl: \".recipe-title a\",\n  });\n}\nfunction handleRenameRecipe(e, parent) {\n  e.preventDefault();\n  const { index0: title } = getInputValueByForm(e.target);\n  const list = e.target.closest(\".list-item\");\n  const list_id = list.dataset.listId;\n  list.dataset.state = \"loading\";\n  useApi(\"rename-list\", { title, list_id }).then((res) => {\n    if (res.error) {\n      handleError(res.error, list);\n    } else {\n      list.dataset.state = \"idle\";\n    }\n  });\n}\nwindow.__FAVE_RECIPE = {\n  ...window.__FAVE_RECIPE,\n  deleteRecipeFromList,\n  deleteList,\n};\n\nfunction deleteRecipeFromList({ recipeId, listId }) {\n  return useApi(\"remove-item\", {\n    item_id: parseInt(recipeId),\n    list_id: parseInt(listId),\n  });\n}\n","import \"./scripts/account-page.js\";\nimport \"./styles/account-page.scss\";\n"]}